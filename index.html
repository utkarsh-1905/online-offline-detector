<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Chat App</title>
</head>
<body>

    <h2 class="user-name">User</h2>

    <button class="add-friend">Add Friend</button>

    <ul class="friends">
        <!-- display list of all friends -->
    </ul>

    <!-- from docs -->
    <script src="/socket.io/socket.io.js"></script> 
    <script>
        // ask user name

        const name = prompt("Enter your name");
        const user = document.querySelector(".user-name");
        user.textContent = name;

        const socket = io()

        const myStatus = document.createElement('span')
        myStatus.classList.add('my-status')
        user.appendChild(myStatus)

        const addFriend = document.querySelector(".add-friend")

        addFriend.addEventListener('click',(e)=>{
            const friend = prompt("Enter friends name");
            // send friend to backend and add to friends list
        })

        socket.on('connect',()=>{
            myStatus.textContent = ' - Online'
        })

        socket.on('connect_error',(error)=>{
            myStatus.textContent = ' - Offline'
            console.log(error.message);
        })

        const ul = document.querySelector('.friends')

        function createFriend(name){
            const l = document.createElement('li')
            const s1 = document.createElement('p')
            const s2 = document.createElement('p')
            const t = document.createTextNode(name)
            const o = document.createTextNode('offline')
            s1.appendChild(t)
            s2.appendChild(o)
            s2.className = name
            l.appendChild(s1)
            l.appendChild(s2)
            ul.appendChild(l)
        }
        // usage example - createFriend('utkarsh')

        async function getFriends(){
            // cache this in local storage
            // get all friends then call createFriend function in loop to display all friends
        }

        // call this function to update user status
        function updateFriendStatus(name){
            const node = document.querySelector(`.${name}`)
            if(node.textContent === 'offline'){
                node.textContent = 'online'
            }else{
                node.textContent = 'offline'
            }
        }

    </script>
</body>
</html>